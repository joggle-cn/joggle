<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wuweibi.bullet.mapper.DeviceMapper">



	<update id="updateName" parameterType="map">
		update t_device set name =#{name} where id =#{id}
	</update>

	<select id="exists" resultType="boolean" parameterType="map">
		select count(1) from t_device where userId = #{userId} and id = #{id}
	</select>
	<select id="existsDevice" resultType="boolean" parameterType="map">
		select count(1) from t_device where deviceId = #{deviceId}
	</select>

<!--	获取设备详情-->
    <select id="selectDeviceInfoById" resultType="com.alibaba.fastjson.JSONObject">
		select
		   a.`id`, a.`name`, a.`deviceId`, a.`createTime`, a.`intranet_ip` as intranetIp, a.`mac_addr` as macAddr,
		       b.name as lineName,
		       b.broadband as broadband
		from t_device a
		left join t_server_tunnel b on a.server_tunnel_id = b.id
		where a.id = #{deviceId}
	</select>
</mapper>
